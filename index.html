<div class="grid grid-cols-2 gap-4 w-full mb-6">
    <div class="glass p-4 rounded-3xl flex items-center justify-between">
        <div>
            <p class="text-[9px] text-gray-500 font-bold uppercase">Calories</p>
            <span id="kcalDisplay" class="text-xl font-black tabular-nums">0</span>
        </div>
        <div class="text-[#FF9500]">ğŸ”¥</div>
    </div>
    <div class="glass p-4 rounded-3xl flex items-center justify-between">
        <div>
            <p class="text-[9px] text-gray-500 font-bold uppercase">Avg Speed</p>
            <span id="speedDisplay" class="text-xl font-black tabular-nums">0.0</span>
        </div>
        <div class="text-[#007AFF]">âš¡</div>
    </div>
</div>

<section class="mt-4">
    <div class="flex justify-between items-center mb-4">
        <h3 class="text-xs font-bold text-gray-400 uppercase tracking-widest">Analytics</h3>
        <div class="flex gap-2 glass p-1 rounded-xl">
            <button onclick="updateChart('day')" class="tab-btn px-3 py-1 text-[10px] font-bold rounded-lg bg-[#34C759] text-black transition-all">DAY</button>
            <button onclick="updateChart('week')" class="tab-btn px-3 py-1 text-[10px] font-bold rounded-lg text-gray-400">WEEK</button>
            <button onclick="updateChart('month')" class="tab-btn px-3 py-1 text-[10px] font-bold rounded-lg text-gray-400">MONTH</button>
        </div>
    </div>
    
    <div class="glass p-5 rounded-[2.5rem] mb-6 relative overflow-hidden">
        <div class="h-40 w-full">
            <canvas id="runChart"></canvas>
        </div>
    </div>
</section>

<script>
    // æ–°å¢æ ¸å¿ƒé‚è¼¯ç‰‡æ®µ
    function updateMetrics() {
        // å¡è·¯é‡Œï¼šå‡è¨­ 70kg, 1km æ¶ˆè€—ç´„ 72å¤§å¡
        const kcal = (totalDist * 72.5).toFixed(1);
        document.getElementById('kcalDisplay').innerText = kcal;
        
        // æ™‚é€Ÿï¼škm/h
        const speed = seconds > 0 ? (totalDist / (seconds / 3600)).toFixed(1) : "0.0";
        document.getElementById('speedDisplay').innerText = speed;
    }

    // å¢å¼·å‹ Chart é…ç½® (æŸ±ç‹€åœ– + å‹•æ…‹åˆ‡æ›)
    function updateChart(period) {
        // åˆ‡æ› UI æ¨£å¼
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.className = 'tab-btn px-3 py-1 text-[10px] font-bold rounded-lg text-gray-400';
        });
        event.target.className = 'tab-btn px-3 py-1 text-[10px] font-bold rounded-lg bg-[#34C759] text-black';

        // æ¨¡æ“¬æ•¸æ“šï¼ˆå¯¦éš›é–‹ç™¼å¯å¾ DB çµ±è¨ˆï¼‰
        const mockData = {
            day: { labels: ['6am', '10am', '2pm', '6pm', '10pm'], data: [0, 2.4, 1.1, 4.5, 0.5] },
            week: { labels: ['M', 'T', 'W', 'T', 'F', 'S', 'S'], data: [5, 8, 4, 10, 6, 12, 15] },
            month: { labels: ['W1', 'W2', 'W3', 'W4'], data: [45, 52, 38, 65] }
        };

        const config = mockData[period];
        
        myChart.data.labels = config.labels;
        myChart.data.datasets[0].data = config.data;
        myChart.data.datasets[0].type = 'bar'; // æ”¹ç‚ºæŸ±ç‹€åœ–å¢åŠ è¦–è¦ºè¡æ“Š
        myChart.update({
            duration: 800,
            easing: 'easeOutQuart'
        });
    }
</script>
